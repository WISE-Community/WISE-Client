<component-header [componentContent]="componentContent"></component-header>
<div *ngIf="isShowWorkFromAnotherComponent"
    fxLayout="row wrap"
    fxLayoutAlign="space-around center"
    class="show-work-from-another-component-div">
  <mat-card *ngFor="let peerChatWorkgroupId of peerChatWorkgroupIds"
      class="mat-elevation-z2 work-from-another-component">
    <div fxLayoutAlign="start center" fxLayoutGap="10px">
      <mat-icon class="mat-30"
          [ngStyle]="{'color': avatarColor}"
          aria-label="Me"
          i18n-aria-label
          matTooltip="Me"
          matTooltipPosition="above"
          i18n-matTooltip>
        account_circle
      </mat-icon>
      <span>Workgroup {{ peerChatWorkgroupId }}</span>
    </div>
    <div *ngIf="peerWorkFromAnotherComponent[peerChatWorkgroupId] != null"
        [ngSwitch]="peerWorkFromAnotherComponent[peerChatWorkgroupId].componentType">
      <concept-map-grading *ngSwitchCase="'ConceptMap'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </concept-map-grading>
      <draw-grading *ngSwitchCase="'Draw'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </draw-grading>
      <graph-grading *ngSwitchCase="'Graph'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </graph-grading>
      <label-grading *ngSwitchCase="'Label'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </label-grading>
      <match-grading *ngSwitchCase="'Match'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </match-grading>
      <multiple-choice-grading *ngSwitchCase="'MultipleChoice'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </multiple-choice-grading>
      <open-response-grading *ngSwitchCase="'OpenResponse'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </open-response-grading>
      <table-grading *ngSwitchCase="'Table'"
          [nodeId]="showWorkNodeId"
          [componentId]="showWorkComponentId"
          [componentState]="peerWorkFromAnotherComponent[peerChatWorkgroupId]"
          [workgroupId]="peerChatWorkgroupId">
      </table-grading>
    </div>
  </mat-card>
</div>
<component-header *ngIf="secondPromptComponentContent"
    [componentContent]="secondPromptComponentContent">
</component-header>
<div *ngIf="isPeerChatWorkgroupsResponseReceived && !isPeerChatWorkgroupsAvailable">
  <div fxLayoutAlign="center center" i18n>
    Peer Chat Not Available Yet
  </div>
</div>
<div *ngIf="isPeerChatWorkgroupsAvailable"
    fxLayout="row wrap"
    fxLayoutAlign="start start"
    fxLayoutGap="20px">
  <mat-card class="mat-elevation-z2">
    <peer-chat-messages [peerChatMessages]="peerChatMessages" [myWorkgroupId]="myWorkgroupId">
    </peer-chat-messages>
    <div fxLayout="row"
        fxLayoutAlign="start center"
        fxLayoutGap="8px">
      <mat-form-field fxFlex class="form-field-no-label form-field-no-hint" appearance="fill">
        <textarea matInput
            cdkTextareaAutosize
            placeholder="Add response..."
            i18n-placeholder
            [(ngModel)]="messageText"
            (ngModelChange)="studentResponseChanged()"
            [disabled]="isDisabled"
            (keypress)="studentKeyPressed($event)">
        </textarea>
      </mat-form-field>
      <button mat-flat-button
          color="primary"
          (click)="submitStudentResponse()"
          [disabled]="!isSubmitEnabled"
          i18n>
        Send
      </button>
    </div>
  </mat-card>
  <mat-card *ngIf="componentContent.questionBank.length > 0" class="question-bank-card">
    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px" class="question-bank-label">
      <mat-icon>help</mat-icon>
      <span i18n>Question Bank</span>
    </div>
    <div *ngFor="let question of componentContent.questionBank"
        class="question">
      {{ question }}
    </div>
  </mat-card>
</div>