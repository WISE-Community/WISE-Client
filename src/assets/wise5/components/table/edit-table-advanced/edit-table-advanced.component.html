<div class="data-explorer-authoring" fxLayout="column" fxLayoutGap="10px">
  <div>
    <mat-checkbox
        color="primary"
        [(ngModel)]="authoringComponentContent.isDataExplorerEnabled"
        (ngModelChange)="toggleDataExplorer()"
        i18n>
      Enable Data Explorer
    </mat-checkbox>
  </div>
  <div *ngIf="authoringComponentContent.isDataExplorerEnabled"
      fxLayout="column" fxLayoutGap="10px">
    <div fxLayout="row wrap" fxLayoutGap="40px">
      <span i18n>Allowed Graph Types:</span>
      <mat-checkbox
          color="primary"
          [(ngModel)]="isDataExplorerScatterPlotEnabled"
          (ngModelChange)="dataExplorerToggleScatterPlot()"
          i18n>
        Scatter Plot
      </mat-checkbox>
      <mat-checkbox
          color="primary"
          [(ngModel)]="isDataExplorerLineGraphEnabled"
          (ngModelChange)="dataExplorerToggleLineGraph()"
          i18n>
        Line Graph
      </mat-checkbox>
      <mat-checkbox
          color="primary"
          [(ngModel)]="isDataExplorerBarGraphEnabled"
          (ngModelChange)="dataExplorerToggleBarGraph()"
          i18n>
        Bar Graph
      </mat-checkbox>
    </div>
    <div *ngIf="isDataExplorerScatterPlotEnabled">
      <mat-checkbox
          color="primary"
          [(ngModel)]="authoringComponentContent.isDataExplorerScatterPlotRegressionLineEnabled"
          (ngModelChange)="componentChanged()"
          i18n>
        Show Scatter Plot Regression Line
      </mat-checkbox>
    </div>
    <div>
      <mat-form-field class="number-input">
        <mat-label i18n>Number of Series</mat-label>
        <input matInput
            type="number"
            min="1"
            [(ngModel)]="authoringComponentContent.numDataExplorerSeries"
            (ngModelChange)="numDataExplorerSeriesChanged()"/>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="number-input">
        <mat-label i18n>Number of Y Axes</mat-label>
        <input matInput
            type="number"
            min="1"
            [(ngModel)]="authoringComponentContent.numDataExplorerYAxis"
            (ngModelChange)="numDataExplorerYAxisChanged()"/>
      </mat-form-field>
    </div>
    <div *ngIf="authoringComponentContent.numDataExplorerYAxis > 1"
        fxLayout="column" fxLayoutGap="10px">
      <span i18n>Choose the Y Axis for each Series</span>
      <div *ngFor="let s of [].constructor(authoringComponentContent.numDataExplorerSeries); index as seriesIndex">
        <mat-form-field>
          <mat-label><span i18n>Series</span> {{ seriesIndex + 1 }}</mat-label>
          <mat-select
              [(ngModel)]="authoringComponentContent.dataExplorerSeriesParams[seriesIndex].yAxis"
              (ngModelChange)="componentChanged()">
            <mat-option *ngFor="let y of [].constructor(authoringComponentContent.numDataExplorerYAxis); index as yAxisIndex"
                [value]="yAxisIndex">
              <span i18n>Y Axis</span><span> {{ yAxisIndex + 1 }}</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div>
      <mat-checkbox
          color="primary"
          [(ngModel)]="authoringComponentContent.isDataExplorerAxisLabelsEditable"
          (ngModelChange)="componentChanged()"
          i18n>
        Can Student Edit Axis Labels
      </mat-checkbox>
    </div>
    <div fxLayoutGap="20px">
      <div class="fix-data-to-table-column-label"
          fxLayout="row"
          fxLayoutAlign="start center"
          fxLayoutGap="10px">
        <span i18n>Fix Data to Table Column</span>
        <mat-icon
            matTooltip="You can author x or y data to always use a specific table column. The student will not be able to change the table column for that x or y data. If you want the student to be able to choose the table column, you can leave the select option blank for that x or y data."
            matTooltipPosition="right"
            i18n-matTooltip>
          help
        </mat-icon>
      </div>
      <mat-form-field>
        <mat-label i18n>X Data</mat-label>
        <mat-select [(ngModel)]="authoringComponentContent.dataExplorerDataToColumn['x']"
            (ngModelChange)="componentChanged()">
          <mat-option [value]="" i18n>(Allow student to select)</mat-option>
          <mat-option *ngFor="let columnName of columnNames; index as columnIndex"
              [value]="columnIndex">
            <ng-container *ngIf="columnName === ''">
              (<span i18n>Table Column</span> {{columnIndex + 1}})
            </ng-container>
            <ng-container *ngIf="columnName !== ''">{{columnName}}</ng-container>
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field
          *ngFor="let y of [].constructor(authoringComponentContent.numDataExplorerSeries); index as dataExplorerSeriesIndex">
        <mat-label i18n>Y Data {{ (authoringComponentContent.numDataExplorerSeries > 1 ? dataExplorerSeriesIndex + 1 : "") }}</mat-label>
        <mat-select
            [(ngModel)]="authoringComponentContent.dataExplorerDataToColumn['y' + (dataExplorerSeriesIndex > 0 ? (dataExplorerSeriesIndex + 1) : '')]"
            (ngModelChange)="componentChanged()">
          <mat-option [value]="" i18n>(Allow student to select)</mat-option>
          <mat-option *ngFor="let columnName of columnNames; index as columnIndex"
              [value]="columnIndex">
            <ng-container *ngIf="columnName === ''">
              (<span i18n>Table Column</span> {{columnIndex + 1}})
            </ng-container>
            <ng-container *ngIf="columnName !== ''">{{columnName}}</ng-container>
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</div>
<div *ngIf="isNotebookEnabled()">
  <edit-component-add-to-notebook-button [authoringComponentContent]="authoringComponentContent">
  </edit-component-add-to-notebook-button>
</div>
<edit-component-save-button [authoringComponentContent]="authoringComponentContent">
</edit-component-save-button>
<br/>
<edit-component-submit-button [authoringComponentContent]="authoringComponentContent">
</edit-component-submit-button>
<edit-component-max-submit
    *ngIf="authoringComponentContent.showSubmitButton"
    [(maxSubmitCount)]="authoringComponentContent.maxSubmitCount"
    (maxSubmitCountChange)="maxSubmitCountChanged($event)">
</edit-component-max-submit>
<edit-component-default-feedback
    [authoringComponentContent]="authoringComponentContent">
</edit-component-default-feedback>
<div fxLayout="column" fxLayoutAlign="start start">
  <edit-component-max-score [authoringComponentContent]="authoringComponentContent">
  </edit-component-max-score>
  <edit-component-exclude-from-total-score [authoringComponentContent]="authoringComponentContent">
  </edit-component-exclude-from-total-score>
  <edit-component-width [authoringComponentContent]="authoringComponentContent">
  </edit-component-width>
  <edit-component-rubric [authoringComponentContent]="authoringComponentContent">
  </edit-component-rubric>
  <edit-component-tags [authoringComponentContent]="authoringComponentContent">
  </edit-component-tags>
  <edit-component-peer-group-activity-tag [authoringComponentContent]="authoringComponentContent">
  </edit-component-peer-group-activity-tag>
</div>
<edit-table-connected-components
    [nodeId]="nodeId"
    [componentId]="componentId"
    [allowedConnectedComponentTypes]="allowedConnectedComponentTypes"
    [componentContent]="authoringComponentContent"
    [connectedComponents]="authoringComponentContent.connectedComponents"
    (connectedComponentsChanged)="connectedComponentsChanged($event)">
</edit-table-connected-components>
<edit-component-json [nodeId]="nodeId" [componentId]="componentId"></edit-component-json>
