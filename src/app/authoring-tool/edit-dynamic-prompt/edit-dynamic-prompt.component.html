<div class="section-container">
  <div class="enable-dynamic-prompt-div">
    <mat-checkbox
      [checked]="componentContent.dynamicPrompt?.enabled"
      (change)="toggleDynamicPrompt($event)"
      color="primary"
      i18n
    >
      Enable Dynamic Prompt
    </mat-checkbox>
  </div>
  <div *ngIf="componentContent.dynamicPrompt?.enabled">
    <div
      class="reference-component-div"
      fxLayout="row wrap"
      fxLayoutAlign="start center"
      fxLayoutGap="20px"
    >
      <mat-label class="bold" i18n>Reference Component:</mat-label>
      <select-step-and-component
        [referenceComponent]="componentContent.dynamicPrompt.referenceComponent"
        [thisComponentId]="componentId"
        [allowedComponentTypes]="allowedReferenceComponentTypes"
        (stepChange)="dynamicPromptChangedEvent.next()"
        (componentChange)="dynamicPromptChangedEvent.next()"
      >
      </select-step-and-component>
      <edit-component-peer-grouping-tag [componentContent]="componentContent.dynamicPrompt">
      </edit-component-peer-grouping-tag>
    </div>
    <translatable-textarea
      [content]="componentContent.dynamicPrompt"
      key="prePrompt"
      label="Pre Prompt (Optional)"
      i18n-label
      (defaultLanguageTextChanged)="dynamicPromptChangedEvent.next()"
    ></translatable-textarea>
    <div class="feedback-rules-div">
      <edit-dynamic-prompt-rules [feedbackRules]="componentContent.dynamicPrompt.rules">
      </edit-dynamic-prompt-rules>
    </div>
    <translatable-textarea
      [content]="componentContent.dynamicPrompt"
      key="postPrompt"
      label="Post Prompt (Optional)"
      i18n-label
      (defaultLanguageTextChanged)="dynamicPromptChangedEvent.next()"
    ></translatable-textarea>
  </div>
</div>
