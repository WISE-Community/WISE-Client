<h2 mat-dialog-title i18n>Manage Tags</h2>
<mat-dialog-content class="dialog-content-scroll">
  <div fxLayout="column" fxLayoutGap="12px">
    <div *ngIf="!showCreateTag">
      <button mat-flat-button color="primary" (click)="showCreateTag = !showCreateTag" i18n>
        + New Tag
      </button>
    </div>
    <edit-tag *ngIf="showCreateTag" (closeEvent)="showCreateTag = false" />
    <mat-list class="app-bg-bg">
      <div *ngFor="let tag of tags; let tagIndex = index; let last = last">
        <mat-list-item>
          <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
            <div *ngIf="idToEditing[tag.id]" class="edit-tag">
              <edit-tag [tag]="tag" (closeEvent)="cancelEditing(tag)" />
            </div>
            <ng-container *ngIf="!idToEditing[tag.id]">
              <tag class="mat-small" [color]="tag.color" [text]="tag.text" />
              <span fxFlex></span>
              <button
                mat-icon-button
                color="primary"
                (click)="idToEditing[tag.id] = !idToEditing[tag.id]; showCreateTag = false"
                matTooltip="Edit"
                matTooltipPosition="above"
                i18n-matTooltip
              >
                <mat-icon>edit</mat-icon>
              </button>
              <button
                mat-icon-button
                color="primary"
                (click)="delete(tag)"
                matTooltip="Delete"
                matTooltipPosition="above"
                i18n-matTooltip
              >
                <mat-icon>close</mat-icon>
              </button>
            </ng-container>
          </div>
        </mat-list-item>
        <mat-divider *ngIf="!last" />
      </div>
    </mat-list>
  </div>
</mat-dialog-content>
<mat-dialog-actions fxLayoutAlign="end">
  <button mat-button cdkFocusInitial mat-dialog-close i18n>Close</button>
</mat-dialog-actions>
